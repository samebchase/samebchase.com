<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
  <head>
    <link href='../css/style.css' rel='stylesheet' type='text/css' media='screen' />
    <link rel='icon' type='image/png' href='../img/s.png' />
    <title>rust-contribution
    </title>
  </head>
  <body>
    <div id='container'>
      <div id='header'>
        <ul>
          <li>
            <a href='../index.html'>home
            </a>
          </li>
          <li>
            <a href='index.html'>archive
            </a>
          </li>
        </ul>
      </div>
      <div id='sidebar'></div>
      <div id='content'>
        <h3>First contribution to Rust
        </h3>
<p>My friend Vineela had an interview where she was asked to find the
majority element of an array.
</p>
<p>The problem described that the majority element of an array of size N
is defined as the element that occurs N/2 times when N is even and N/2
+ 1 times when it is odd. Easy, right?
</p>
<p>Well, the solution took me an embarassingly long time to write. I
decided to write the program in Common Lisp, as that is one of the
languages that I am the most familiar with, at the moment.
</p>
<p>I hadn&#039;t solved any exercises in quite some time, so I was
understandably rusty. gsathya was able to come up with a Python
solution in like three minutes.
</p>
<p>Once I started writing the program, I began to see parts of the code
that should be in a function. I created smaller helper functions and
then began to test them in the SLIME repl. Just when I felt that I was
almost done, I kept getting strange results. By that time I had been
struggling with the trivial problem for a shamefully long time and my
head was in no mood to focus hard. With great difficulty, I managed to
get it working and pasted my results.
</p>
<p>The next day, I thought that this would be a nice, trivial exercise to
solve in Rust. I set about attempting the program. Not being
comfortable with the language, I had to look up example code from the
tutorials to do even the simplest of things.
</p>
<p>I decided to use a hash-table just like my Lisp solution. This is when
things started getting irritating. Rust, being a new, rapidly evolving
language recently had some changes to its hash-tables. Documentation
was sparse, but with what little there was and some comments on the
internet, I was able to get some sort of an idea how to go about this.
</p>
<p>Once, I&#039;d reached a dead-end, I decided to join the #rust IRC channel
and ask for help. People there asked me what build of the Rust
compiler I was using. I told them that I&#039;d been using the trunk build
of Rust. I had been building it fairly regularly. However, what
happened was that I hadn&#039;t done a &quot;make install&quot; which would have
updated the target of the Rust compiler symlink I had been using.
</p>
<p>Doing &quot;make install&quot; did not solve the problem and I later learned
that I had to build the &quot;incoming&quot; branch of Rust and not the &quot;master&quot;
branch which could be up to a month old. I built the &quot;incoming&quot; branch
of Rust and tried my program. It worked. Finally. Progress.
</p>
<p>I was quite fatigued from struggling at my computer for so long that I
felt that I had to take a break.
</p>
<p>After the break, I thought it would be a good idea to get a code
review from #rust. A friendly person on the channel actually bothered
to make changes to my solution and pasted his modified version. The
gist of his review was that I was writing my own print_vector()
function when there already was a vec.to_str() method which does that
for me.
</p>
<p>I then thought there might be something similar for HashMap, which is
the hash-table type in Rust. Trying some example code confirmed that a
to_str() method wasn&#039;t implemented for HashMaps. I thought that it&#039;d
be fun to try and write it.
</p>
<p>Having the Rust compiler codebase with me, I did an &quot;M-x find-grep&quot; in
Emacs and then found the file where all the to_str() methods for the
various types are implemented.
</p>
<p>The file looked tricky at first glance, but after a closer look at the
parts that were important, and selectively ignoring things that
were not, I began to understand what the code did.
</p>
<p>I began to see the implementations of the to_str() method for vectors
and the like, and I realised that this is the place where I should
write the function.
</p>
<p>
</p>
<p>The code itself was pretty straightforward, as I had just written a
print-object function for hash-tables in Common Lisp the day before. I
just had to iterate over all the (key, value) pairs in the hash-table
and print them. I had a look at the implementations of the methods for
the other types and wrote something similar for HashMaps. Whatever
minor difficulties I had after that were quickly resolved with a
little help from the nice people on #rust.
</p>
<p>My pull request on Github was merged in a few days later.
</p>
<p>P.S. It was fun writing this while waiting for Rust to build and run
all the tests.

</p>
      </div>
      <div id='filler'></div>
      <div id='footer'></div>
    </div>
  </body>
</html>